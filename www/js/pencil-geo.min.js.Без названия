function geoConfig(e,t,n,o,a,i,c,r,p,s,h,l,m){return{ButtonText:e,ButtonUrl:t,ButtonTarget:t.indexOf("fiftythree.com")<0?"_blank":"",CaptionText:a,CaptionUrl:i,CaptionTarget:i.indexOf("fiftythree.com")<0?"_blank":"",CurrencySign:c,CurrencyText:r,WalnutPrice:p.toFixed(2).split("."),GraphitePrice:s.toFixed(2).split("."),WalnutLinkUrl:h,GraphiteLinkUrl:l,BannerText:m}}function getGeoIP(e,t){function n(){"loading"!==document.readyState&&updateMessages()}try{t=t||e.country_code,t=t.toUpperCase(),docCookies.setItem("geoipcc",t,cookieExpire,"/","fiftythree.com"),countryCodesUS.indexOf(t)>=0?pencilMessages=pencilShops.US:countryCodesCA.indexOf(t)>=0?pencilMessages=pencilShops.CA:countryCodesDE.indexOf(t)>=0?pencilMessages=pencilShops.DE:countryCodesES.indexOf(t)>=0?pencilMessages=pencilShops.ES:countryCodesFR.indexOf(t)>=0?pencilMessages=pencilShops.FR:countryCodesIT.indexOf(t)>=0?pencilMessages=pencilShops.IT:countryCodesUK.indexOf(t)>=0?pencilMessages=pencilShops.UK:pencilMessages=pencilShops.XX,n()}catch(o){pencilMessages=pencilShops.US,n()}}function createScriptTag(e){var t=document.createElement("script");return t.src=e,t.type="text/javascript",t}function updateMessages(){var e=$("a.action-button");e.attr("href",pencilMessages.ButtonUrl),e.attr("target",pencilMessages.ButtonTarget),e.html(pencilMessages.ButtonText);var t=$("a.pencil-promo-banner");t.attr("href",pencilMessages.ButtonUrl),t.attr("target",pencilMessages.ButtonTarget),t.html(pencilMessages.BannerText);var n=$("section.order-section"),o=n.find("a.section-description");n.find("a.also-available");o.attr("href",pencilMessages.CaptionUrl),o.attr("target",pencilMessages.CaptionTarget),o.html(pencilMessages.CaptionText);var a=n.find("a.product-walnut"),i=n.find("a.product-graphite");a.find(".price-symbol").html(pencilMessages.CurrencySign),a.find(".price-whole").html(pencilMessages.WalnutPrice[0]),a.find(".price-tenths").html(pencilMessages.WalnutPrice[1]),a.find(".price-currency").html(pencilMessages.CurrencyText),i.find(".price-symbol").html(pencilMessages.CurrencySign),i.find(".price-whole").html(pencilMessages.GraphitePrice[0]),i.find(".price-tenths").html(pencilMessages.GraphitePrice[1]),i.find(".price-currency").html(pencilMessages.CurrencyText),updateWalnutGraphiteLinks()}function updateWalnutGraphiteLinks(){var e=$("a.product-walnut"),t=$("a.product-graphite");e.attr("href",pencilMessages.WalnutLinkUrl),pencilMessages.WalnutLinkUrl.indexOf("shop.fiftythree.com")<0&&e.attr("target","_blank"),t.attr("href",pencilMessages.GraphiteLinkUrl),pencilMessages.GraphiteLinkUrl.indexOf("shop.fiftythree.com")<0&&t.attr("target","_blank")}var shopLink="http://shop.fiftythree.com",shopLinkCA="http://shop.fiftythree.com/?cc=NA",shopLinkEU="http://eu.shop.fiftythree.com",shopLinkDE="http://eu.shop.fiftythree.com/?cc=EU",shopLinkES="http://eu.shop.fiftythree.com/?cc=EU",shopLinkFR="http://eu.shop.fiftythree.com/?cc=EU",shopLinkIT="http://eu.shop.fiftythree.com/?cc=EU",shopLinkUK="http://eu.shop.fiftythree.com/?cc=EU",shopLinkUS="http://shop.fiftythree.com/?cc=NA",whereToBuyLink="http://www.fiftythree.com/buy",shopLinkUS_Wa="http://shop.fiftythree.com/?cc=US&product=walnut",shopLinkUS_Gr="http://shop.fiftythree.com/?cc=US&product=graphite",amazonLinkUS_Wa="http://amzn.to/1IeCqU8",amazonLinkUS_Gd="http://amzn.to/2fP4hFT";amazonLinkUS_Gr="http://amzn.to/1IeE344",amazonLinkUS="http://amzn.to/2k8Af2K",countryCodesUS=["US","AU","CN","IN","ID","JP","MY","NZ","PH","SG","KR","TH","TW","VN"],shopLinkCA_Wa="http://shop.fiftythree.com/?cc=CA&product=walnut",shopLinkCA_Gr="http://shop.fiftythree.com/?cc=CA&product=graphite",amazonLinkCA_Wa="http://amzn.to/1NPFJDb",amazonLinkCA_Gr="http://amzn.to/1NPFGao",amazonLinkCA=amazonLinkCA_Wa,countryCodesCA=["CA"],amazonLinkDE_Wa="http://amzn.to/1MAR8J4",amazonLinkDE_Gr="http://amzn.to/1MARaAE",amazonLinkDE=amazonLinkDE_Wa,countryCodesDE=["AT","BG","HR","CY","CZ","DK","EE","FI","DE","GR","HU","IS","IE","LV","LT","MT","NL","NO","PL","PT","RO","SK","SI","SE","CH","TR"],countryCodesES=["ES"],amazonLinkFR_Wa="http://amzn.to/1XgBOcE",amazonLinkFR_Gr="http://amzn.to/1Oh8kWp",amazonLinkFR=amazonLinkFR_Wa,countryCodesFR=["BE","FR","LU"],countryCodesIT=["IT"],shopLinkUK_Wa="http://eu.shop.fiftythree.com/?cc=EU&product=walnut",shopLinkUK_Gr="http://eu.shop.fiftythree.com/?cc=EU&product=graphite",amazonLinkUK_Wa="http://amzn.to/1XgBqee",amazonLinkUK_Gr="http://amzn.to/1Oh81eg",amazonLinkUK=amazonLinkUK_Wa,countryCodesUK=["GB","UK"],shopLinkEU_Wa="http://eu.shop.fiftythree.com/?product=walnut",shopLinkEU_Gr="http://eu.shop.fiftythree.com/?product=graphite",priceUS_Wa=59.95,priceUS_Gr=29.95,priceEU_Wa=59.99,priceEU_Gr=49.99,priceUK_Wa=49.99,priceUK_Gr=39.99,footerText="Now available at Amazon.",footerText_EU="Now available at Amazon.",footerText_UK="Now available at Amazon.",pencilShops={US:geoConfig("Buy at Amazon.com",amazonLinkUS,"","",footerText,amazonLinkUS,"$","USD",priceUS_Wa,priceUS_Gr,shopLinkUS_Wa,shopLinkUS_Gr),CA:geoConfig("Also at Amazon.com",amazonLinkCA,"","",footerText,amazonLinkCA,"$","USD",priceUS_Wa,priceUS_Gr,shopLinkCA_Wa,shopLinkCA_Gr),XX:geoConfig("Buy at Amazon.com",amazonLinkUS,"","","Now available worldwide.",amazonLinkUS,"$","USD",priceUS_Wa,priceUS_Gr,amazonLinkUS_Wa,amazonLinkUS_Gr)},pencilMessages=pencilShops.US,cookieExpire=new Date,geoipScript=createScriptTag("https://telize-v1.p.mashape.com/geoip?mashape-key=uo7k3ifoYAmshLGSuufcC99q6ukrp1MCvcfjsnLnci1SyS83Mh&callback=getGeoIP"),head=document.getElementsByTagName("head")[0],cookieExpire.setDate(cookieExpire.getDate()+10);var docCookies={getItem:function(e){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(e,t,n,o,a,i){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var c="";if(n)switch(n.constructor){case Number:c=n===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+n;break;case String:c="; expires="+n;break;case Date:c="; expires="+n.toUTCString()}return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+c+(a?"; domain="+a:"")+(o?"; path="+o:"")+(i?"; secure":""),!0},removeItem:function(e,t,n){return e&&this.hasItem(e)?(document.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(n?"; domain="+n:"")+(t?"; path="+t:""),!0):!1},hasItem:function(e){return new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)}};location.search.indexOf("cc=")>=0?getGeoIP(null,location.search.replace("?cc=","")):docCookies.hasItem("geoipcc")?getGeoIP(null,docCookies.getItem("geoipcc")):head.appendChild(geoipScript),document.addEventListener("DOMContentLoaded",function(e){updateWalnutGraphiteLinks()});
